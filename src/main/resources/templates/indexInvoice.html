<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extra/spring-security"
	  class="h-100"><head>
<meta charset="UTF-8">
<title>Invoices Management System</title>

<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
</head>
<style>
	.navbar {
		background-color: #41a4bf;
	}
</style>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top" style="background-color: #41a4bf;">
	<div class="container">
			<img src="../static/img/payment.png" width="40" height="40"/>
			<a class="navbar-brand" style="color:white;">Invoice Management System </a>
			<a class="navbar-brand" style="margin-left: 700px;color:white;" href="#" th:href="@{/logout}">Logout </a>

		</div>
</nav>




	<div class="container my-2">


		<form action="#" th:action="@{/saveInvoice}" th:object="${invoice}" style="background-color: aliceblue;border-color: aliceblue;border-radius: 15px;border-style: solid;margin-bottom: 30px;width: 1070px;height: 150px"
			  method="POST">
			<h4 style="margin-left:50px;margin-top: 20px">Create new Invoice</h4>

			<div style="float:left;display: flex; flex-direction: row;flex: 50px;padding-top: 15px;padding-left: 50px">
			<input type="text" th:field="*{title}"
				   placeholder="Title" class="form-control mb-4 col-4">

			<input type="text" th:field="*{description}"
				   placeholder="Description" class="form-control mb-4 col-4" style="margin-left:20px;">

			<input type="date" th:field="*{creationDate}" style="margin-left:20px;"
				   placeholder="creationDate" class="form-control mb-4 col-4">

			<!--			<input type="text" name="search_product" id="search_product" placeholder='Search Item'-->
			<!--				   class="form-control mb-4 col-4" />-->

			<input type="hidden" th:field="*{total}"
				   placeholder="total" class="form-control mb-4 col-4">

			<button style="margin-left:30px;height: 40px" type="submit" class="btn btn-info" > Add Invoice</button>
			</div>
		</form>
<!--		</div>-->
<!--<div class="container my-2">-->



<div style="background-color: aliceblue;border-color: aliceblue;border-radius: 15px;border-style: solid;margin-bottom: 30px;width: 1070px">


	<form th:action="@{/listInvoice}" style="margin-top: 20px;margin-bottom: 20px;float:left;display: flex; flex-direction: row;flex: 50px;margin-left: 50px;">
		<h3 style="width: 300px">Invoices List</h3>
			<input type="text"  style="width: 70px;margin-left: 250px;margin-top: 20px" placeholder="Type invoice info" class="form-control mb-4 col-4" name="keyword" id="keyword" th:value="${keyword}" required />
			&nbsp;
			<input type="submit" value="Search Invoice" style="margin-left:15px;height: 40px;margin-top: 20px" class="btn btn-info" />
			&nbsp;
			<input type="button" value="Display all" id="btnClear"  style="margin-left:15px;margin-top: 20px;height: 40px" class="btn btn-info" onclick="clearSearch()" />
		</form>
		<script type="text/javascript">
			function clearSearch() {
				window.location = "[[@{/listInvoice}]]";
			}
		</script>

<!--	<a th:href = "@{/showNewInvoiceForm}" class="btn btn-primary btn-sm mb-3"> Add Invoice </a>-->
	
		<table border="1" class = "table table-striped table-responsive-md" style="margin-left: 50px;margin-right: 50px;width: 970px;height: 800px">

			<thead>
				<tr>
<!--					<th>-->
<!--						<a th:href="@{'/page/' + ${currentPage} + '?sortField=id&sortDir=' + ${reverseSortDir}}">-->
<!--							Id </a>-->
<!--					</th>-->
					<th>
					<a th:href="@{'/pageInvoice/' + ${currentPage} + '?sortField=title&sortDir=' + ${reverseSortDir}}">
							Title</a>
					</th>
					<th>
					<a th:href="@{'/pageInvoice/' + ${currentPage} + '?sortField=description&sortDir=' + ${reverseSortDir}}">
						Description</a>
					</th>
					<th style="width: 150px">
						<a th:href="@{'/pageInvoice/' + ${currentPage} + '?sortField=creationDate&sortDir=' + ${reverseSortDir}}">
							Creation Date</a>
					</th>
					<th>
						<a th:href="@{'/pageInvoice/' + ${currentPage} + '?sortField=total&sortDir=' + ${reverseSortDir}}">
							Total</a>
					</th>
					<th style="width: 250px"> Actions </th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="invoice : ${listinvoices}">
<!--					<td th:text="${invoice.id}"></td>-->
					<td th:text="${invoice.title}"></td>
					<td th:text="${invoice.description}"></td>
					<td th:text="${invoice.creationDate}"></td>
					<td th:text="${invoice.total}"></td>
					<td> <a th:href="@{/showFormForUpdateInvoice/{id}(id=${invoice.id})}" class="btn btn-primary">Update</a>
					    <a th:href="@{/deleteInvoice/{id}(id=${invoice.id})}" class="btn btn-danger">Delete</a>
						<a th:href="@{/viewInvoice/{id}(id=${invoice.id})}" class="btn" style="color:white;background-color: limegreen">View</a>

					</td>
				</tr>
			</tbody>
		</table>
	</div>
		<div>
			<div class = "row col-sm-10">
				<div class = "col-sm-2">
					Total Rows: [[${totalItems}]] 
				</div>
				<div class = "col-sm-1">
					<span th:each="i: ${#numbers.sequence(1, totalPages)}">
						<a th:if="${currentPage != i}" th:href="@{'/pageInvoice/' + ${i}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">[[${i}]]</a>
						<span th:unless="${currentPage != i}">[[${i}]]</span>  &nbsp; &nbsp;
					</span>
				</div>
				<div class = "col-sm-1">
					<a th:if="${currentPage < totalPages}" th:href="@{'/pageInvoice/' + ${currentPage + 1}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Next</a>
					<span th:unless="${currentPage < totalPages}">Next</span>
				</div>
				
				 <div class="col-sm-1">
    				<a th:if="${currentPage < totalPages}" th:href="@{'/pageInvoice/' + ${totalPages}+ '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Last</a>
					<span th:unless="${currentPage < totalPages}">Last</span>
   				 </div>
			</div>
		</div>
	</div>
</body>
</html>